# 01-プロジェクト概要

> Food-Del-Dashboard - フードデリバリーサービス管理者向けダッシュボード

**最終更新**: 2025-10-15  
**バージョン**: 1.0.0  
**ステータス**: ✅ 本番準備完了

---

## 📋 目次

1. [プロジェクトの目的](#プロジェクトの目的)
2. [主要機能一覧](#主要機能一覧)
3. [技術スタック](#技術スタック)
4. [プロジェクト構成](#プロジェクト構成)
5. [開発環境セットアップ](#開発環境セットアップ)
6. [クイックスタート](#クイックスタート)

---

## 🎯 プロジェクトの目的

### 背景

Food-Delは、食品配達サービスのエコシステムを構成する3つのアプリケーションの1つです：

```
┌─────────────────────────────────────────────────────────┐
│                  Food-Del エコシステム                    │
└─────────────────────────────────────────────────────────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
   ┌────▼─────┐      ┌────▼─────┐     ┌─────▼────┐
   │  Client  │      │Dashboard │     │  Server  │
   │(顧客向け) │      │(管理者向け)│     │(API層)   │
   └──────────┘      └──────────┘     └──────────┘
```

### このプロジェクトの役割

**Food-Del-Dashboard**は、管理者向けのWebアプリケーションであり、以下の役割を担います：

- 📊 **ビジネスインサイト提供** - リアルタイム売上統計、注文状況の可視化
- 🍔 **商品管理** - メニューアイテムの作成、編集、削除、画像管理
- 📦 **注文処理** - 注文の確認、ステータス更新、顧客対応
- 🏷️ **カテゴリ管理** - 商品カテゴリの整理と管理
- 👥 **権限制御** - 管理者とスタッフの役割分離

### ターゲットユーザー

1. **レストランオーナー** - 売上分析、メニュー管理
2. **店舗マネージャー** - 注文処理、在庫管理
3. **スタッフ** - 注文確認、商品情報閲覧

---

## ✨ 主要機能一覧

### 1. ダッシュボード統計機能

```
┌─────────────────────────────────────────────────────────┐
│                    Dashboard Overview                    │
├─────────────────────────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 総売上   │  │ 総注文数 │  │ 商品数   │  │ 平均単価 │ │
│  │ ¥128,500 │  │   45件   │  │  32品    │  │ ¥2,856   │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
├─────────────────────────────────────────────────────────┤
│  📈 売上トレンドグラフ (7日間)                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
├─────────────────────────────────────────────────────────┤
│  🥧 注文状態分布          📊 人気商品ランキング            │
│  待機中: 12件 (27%)       1. マルゲリータピザ (98件)      │
│  調理中: 18件 (40%)       2. カルボナーラ (76件)          │
│  配達中: 10件 (22%)       3. シーザーサラダ (54件)        │
│  完了:    5件 (11%)       ...                            │
└─────────────────────────────────────────────────────────┘
```

**機能詳細**:
- リアルタイム統計データ表示（5分間キャッシュ）
- 売上トレンドグラフ（日別、週別、月別）
- 注文ステータス別集計
- 人気商品ランキング（売上順）
- カテゴリ別売上分析
- 時間帯別注文分布

### 2. 商品管理機能

**CRUD操作**:
- ✅ 商品一覧表示（ページネーション対応）
- ✅ 商品詳細閲覧
- ✅ 新規商品作成（管理者専用）
- ✅ 商品情報編集（管理者専用）
- ✅ 商品削除（管理者専用）
- ✅ 画像アップロード（multipart/form-data）

**検索・フィルタリング**:
```typescript
// 検索条件
{
  search: "ピザ",           // 商品名・説明文検索
  category_id: 1,          // カテゴリフィルタ
  status: true,            // 公開/非公開フィルタ
  min_price: 500,          // 価格範囲フィルタ
  max_price: 2000,
  sort_by: "price",        // ソート項目
  sort_order: "desc"       // ソート順
}
```

### 3. 注文管理機能（管理者専用）

**機能一覧**:
- 📋 注文一覧表示（ステータス別フィルタ）
- 🔍 注文詳細閲覧（注文アイテム、配送情報）
- ✏️ ステータス更新（pending → confirmed → preparing → delivery → completed）
- 📝 メモ追加機能

**注文ステータスフロー**:
```
pending     →    confirmed   →   preparing   →   delivery   →   completed
(待機中)         (確認済)        (準備中)        (配送中)        (完了)
                                                    ↓
                                                cancelled
                                                (キャンセル)
```

### 4. カテゴリ管理機能（管理者専用）

**機能詳細**:
- 📁 カテゴリ一覧表示（商品数カウント付き）
- ➕ 新規カテゴリ作成（名称 + 画像）
- ✏️ カテゴリ編集
- 🗑️ カテゴリ削除（確認ダイアログ付き）

### 5. 認証・権限管理

**認証機能**:
- 🔐 JWT双方向トークン認証（accessToken + refreshToken）
- 🔄 自動トークン更新（401エラー検知時）
- 💾 ローカルストレージ永続化（Zustand + localStorage）

**権限レベル**:

| ロール | ダッシュボード | 商品閲覧 | 商品編集 | 注文管理 | カテゴリ管理 |
|--------|---------------|---------|---------|---------|------------|
| **ADMIN** | ✅ | ✅ | ✅ | ✅ | ✅ |
| **USER** | ✅ | ✅ | ❌ | ❌ | ❌ |
| **未認証** | ❌ | ❌ | ❌ | ❌ | ❌ |

---

## 🛠 技術スタック

### フロントエンド技術

#### コア技術

```typescript
{
  "framework": "React 19.1.1",        // 最新安定版
  "language": "TypeScript 5.9.2",     // 型安全開発
  "buildTool": "Vite 7.1.3",          // 高速ビルド
  "routing": "React Router 7.1.3",    // SPA ルーティング
  "packageManager": "Bun 1.1.38"      // 高速パッケージマネージャー
}
```

#### 状態管理

```typescript
{
  "global": "Zustand 5.0.2",           // グローバル状態（認証など）
  "server": "TanStack Query 5.62.7",   // サーバー状態 + キャッシュ
  "form": "React Hook Form 7.54.2"     // フォーム状態
}
```

#### UI/スタイリング

```typescript
{
  "uiLibrary": "shadcn/ui + Radix UI", // アクセシブルなUIコンポーネント
  "styling": "Tailwind CSS 3.4.17",    // ユーティリティファースト
  "charts": "Recharts 2.15.0",         // データ可視化
  "icons": "Lucide React 0.468.0"      // アイコンライブラリ
}
```

### 技術選定理由

#### React 19.1.1を選んだ理由

✅ **最新機能のサポート**
- Server Components（将来対応準備）
- Compiler最適化
- Suspenseの完全対応

✅ **パフォーマンス**
- 自動バッチング
- Concurrent Rendering
- Transition API

#### Vite 7.1.3を選んだ理由

✅ **開発体験**
- HMR（Hot Module Replacement）爆速
- ESM nativeサポート
- ビルド時間短縮（約5秒）

✅ **プロダクション最適化**
- Tree Shaking
- Code Splitting
- 自動チャンク最適化

#### TanStack Query v5を選んだ理由

✅ **サーバー状態管理**
- 自動キャッシュ管理（staleTime設定）
- 自動再フェッチ（refetchOnWindowFocus）
- 楽観的更新対応

✅ **開発者体験**
- DevTools統合
- TypeScript完全対応
- ローディング・エラー状態の自動管理

#### shadcn/uiを選んだ理由

✅ **カスタマイズ性**
- コンポーネントコードを直接プロジェクトに含む
- 完全なカスタマイズが可能

✅ **アクセシビリティ**
- Radix UIベース（WAI-ARIAコンプライアント）
- キーボードナビゲーション対応

---

## 📁 プロジェクト構成

### ディレクトリ構造

```
food-del-dashboard/
├── src/
│   ├── api/                    # 🌐 API通信層
│   │   ├── index.ts            # Barrel Export入口
│   │   ├── authApi.ts          # 認証API（login, logout, refresh）
│   │   ├── foodsApi.ts         # 商品CRUD API
│   │   ├── categoriesApi.ts    # カテゴリCRUD API
│   │   ├── ordersApi.ts        # 注文管理API
│   │   └── dashboardApi.ts     # ダッシュボード統計API
│   │
│   ├── components/             # 🧩 コンポーネント層
│   │   ├── common/             # 汎用コンポーネント
│   │   │   ├── index.ts
│   │   │   ├── DataTable.tsx   # 設定駆動テーブル
│   │   │   ├── DynamicForm.tsx # 動的フォーム
│   │   │   └── ProtectedRoute.tsx # 権限保護ルート
│   │   ├── dashboard/          # ダッシュボード専用
│   │   │   ├── index.ts
│   │   │   ├── StatsCard.tsx   # 統計カード
│   │   │   ├── SalesChart.tsx  # 売上グラフ
│   │   │   └── ...
│   │   ├── layout/             # レイアウト
│   │   │   ├── index.ts
│   │   │   ├── Header.tsx      # ヘッダー
│   │   │   ├── Sidebar.tsx     # サイドバー
│   │   │   └── Layout.tsx      # メインレイアウト
│   │   └── ui/                 # shadcn/ui基礎コンポーネント
│   │
│   ├── pages/                  # 📄 ページコンポーネント
│   │   ├── auth/
│   │   │   ├── index.ts
│   │   │   └── LoginPage.tsx
│   │   ├── dashboard/
│   │   │   ├── index.ts
│   │   │   └── DashboardPage.tsx
│   │   ├── foods/
│   │   │   ├── index.ts
│   │   │   ├── FoodListPage.tsx
│   │   │   ├── FoodDetailPage.tsx
│   │   │   └── FoodFormPage.tsx
│   │   ├── orders/
│   │   │   ├── index.ts
│   │   │   ├── OrderListPage.tsx
│   │   │   └── OrderDetailPage.tsx
│   │   └── categories/
│   │       ├── index.ts
│   │       ├── CategoryListPage.tsx
│   │       └── CategoryFormPage.tsx
│   │
│   ├── hooks/                  # 🎣 カスタムフック
│   │   ├── index.ts
│   │   ├── useAuth.ts          # 認証状態管理
│   │   ├── useProducts.ts      # 商品データ取得
│   │   ├── useRequireAuth.ts   # 認証チェック
│   │   └── useDashboardAutoRefresh.ts # 自動更新
│   │
│   ├── stores/                 # 🗂️ Zustand状態管理
│   │   └── authStore.ts        # 認証グローバル状態
│   │
│   ├── types/                  # 📝 TypeScript型定義
│   │   ├── index.ts
│   │   ├── auth.ts             # 認証関連型
│   │   ├── food.ts             # 商品関連型
│   │   ├── category.ts         # カテゴリ関連型
│   │   ├── order.ts            # 注文関連型
│   │   └── dashboard.ts        # ダッシュボード統計型
│   │
│   ├── lib/                    # 🔧 ユーティリティ
│   │   ├── apiConstants.ts     # APIエンドポイント定義
│   │   ├── httpClient.ts       # Axios設定（インターセプター）
│   │   ├── queryClient.tsx     # TanStack Query設定
│   │   ├── errorHandler.ts     # エラーハンドリング
│   │   ├── validators.ts       # バリデーション関数
│   │   └── utils.ts            # 汎用ヘルパー
│   │
│   ├── configs/                # ⚙️ 設定ファイル
│   │   ├── dashboardConfig.ts  # ダッシュボード設定
│   │   └── products.ts         # 商品エンティティ設定
│   │
│   ├── App.tsx                 # ルーティング設定
│   ├── main.tsx                # アプリケーションエントリー
│   └── index.css               # グローバルスタイル
│
├── docs/                       # 📚 ドキュメント
├── public/                     # 🌍 静的ファイル
│   └── food.svg
├── package.json
├── vite.config.ts
├── tsconfig.json
└── README.md
```

### ファイル統計

- **総ファイル数**: 101ファイル
- **TypeScriptファイル**: 78ファイル
- **Barrel Export入口**: 11ファイル
- **ページコンポーネント**: 10ファイル
- **APIモジュール**: 5ファイル

---

## 🚀 開発環境セットアップ

### 必須要件

```bash
# 必須ソフトウェア
✅ Bun 1.1.0以上（推奨: 1.1.38）
✅ Node.js 20.0.0以上（Bun未使用時）
✅ Git 2.30以上

# バックエンドサーバー
✅ food-del-server が起動していること（http://localhost:5000）
```

### インストール手順

#### 1. リポジトリクローン

```bash
# リポジトリをクローン
git clone <repository-url>
cd food-del-dashboard
```

#### 2. 依存関係インストール

```bash
# Bunを使用（推奨）
bun install

# または npm
npm install

# または yarn
yarn install
```

#### 3. 環境変数設定（オプション）

プロジェクトルートに `.env` ファイルを作成：

```env
# APIベースURL（デフォルト: http://localhost:5000）
VITE_API_BASE_URL=http://localhost:5000

# 開発モード
VITE_DEV_MODE=true
```

> **注意**: `.env`ファイルはオプションです。設定しない場合、`src/lib/apiConstants.ts`のデフォルト値が使用されます。

#### 4. 開発サーバー起動

```bash
# Bunを使用
bun run dev

# または npm
npm run dev
```

**起動確認**:
```
  VITE v7.1.3  ready in 542 ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.1.100:3000/
```

ブラウザで `http://localhost:3000` にアクセス

#### 5. バックエンドサーバー接続確認

```bash
# 別のターミナルで food-del-server を起動
cd ../food-del-server
bun --watch index.ts

# サーバーが http://localhost:5000 で起動することを確認
```

---

## ⚡ クイックスタート

### 初回ログイン

1. ブラウザで `http://localhost:3000` を開く
2. ログインページが表示される
3. デフォルトアカウントでログイン：

```
管理者アカウント（全機能利用可能）:
Email: admin@example.com
Password: admin123

一般ユーザー（閲覧のみ）:
Email: user@example.com
Password: user123
```

### 基本的なワークフロー

#### 1. ダッシュボード確認

ログイン後、自動的にダッシュボードページに遷移：
- 📊 売上統計カード（4枚）
- 📈 売上トレンドグラフ
- 🥧 注文ステータス分布
- 📋 人気商品ランキング

#### 2. 商品管理

左サイドバーの「商品管理」をクリック：
- 📋 商品一覧閲覧
- 🔍 商品検索（名称・カテゴリ）
- ➕ 新規商品作成（管理者のみ）
- ✏️ 既存商品編集（管理者のみ）

#### 3. 注文管理（管理者のみ）

左サイドバーの「注文管理」をクリック：
- 📋 注文一覧閲覧（ステータス別フィルタ）
- 🔍 注文詳細確認
- ✏️ ステータス更新（dropdown選択）

#### 4. カテゴリ管理（管理者のみ）

左サイドバーの「カテゴリ管理」をクリック：
- 📁 カテゴリ一覧閲覧
- ➕ 新規カテゴリ作成（画像アップロード）
- ✏️ カテゴリ編集

---

## 🔍 トラブルシューティング

### よくある問題

#### 問題1: 開発サーバーが起動しない

```bash
# エラー例
Error: Cannot find module 'vite'
```

**解決策**:
```bash
# node_modulesを削除して再インストール
rm -rf node_modules bun.lock
bun install
```

#### 問題2: APIリクエストが失敗する

```bash
# ブラウザコンソールエラー
Error: Network Error
```

**解決策**:
1. バックエンドサーバーが起動しているか確認：
   ```bash
   curl http://localhost:5000/api/health
   ```
2. CORSエラーの場合、サーバー側でCORS設定を確認

#### 問題3: ログインできない

**解決策**:
1. バックエンドのデータベースにユーザーが存在するか確認
2. ネットワークタブでAPIレスポンスを確認
3. accessTokenが正しく保存されているか確認（localStorage）

#### 問題4: ホットリロードが動作しない

**解決策**:
```bash
# Vite設定を確認
# vite.config.ts の server.watch 設定を確認

# 手動で再起動
bun run dev
```

---

## 📚 次のステップ

このドキュメントで基本的なセットアップが完了しました。次は以下のドキュメントを参照してください：

1. **02-アーキテクチャ設計.md** - システム全体の設計を理解
2. **03-開発ガイド.md** - コーディング規約と開発フロー
3. **04-API統合仕様.md** - API通信の詳細
4. **05-コンポーネント設計.md** - コンポーネント開発パターン

---

## 📞 サポート

質問や問題がある場合：
1. プロジェクトのIssueを確認
2. ドキュメントを検索
3. 開発チームに連絡

---

**ドキュメント作成者**: Food-Del Dashboard Development Team  
**最終レビュー日**: 2025-10-15
