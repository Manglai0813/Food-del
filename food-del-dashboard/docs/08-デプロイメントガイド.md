# 08-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰

> Food-Del-Dashboard ã®æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ‰‹é †

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ¦‚è¦](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ¦‚è¦)
2. [ç’°å¢ƒå¤‰æ•°è¨­å®š](#ç’°å¢ƒå¤‰æ•°è¨­å®š)
3. [æœ¬ç•ªãƒ“ãƒ«ãƒ‰](#æœ¬ç•ªãƒ“ãƒ«ãƒ‰)
4. [Vercelãƒ‡ãƒ—ãƒ­ã‚¤](#vercelãƒ‡ãƒ—ãƒ­ã‚¤)
5. [Netlifyãƒ‡ãƒ—ãƒ­ã‚¤](#netlifyãƒ‡ãƒ—ãƒ­ã‚¤)
6. [Nginxãƒ‡ãƒ—ãƒ­ã‚¤](#nginxãƒ‡ãƒ—ãƒ­ã‚¤)
7. [Dockerãƒ‡ãƒ—ãƒ­ã‚¤](#dockerãƒ‡ãƒ—ãƒ­ã‚¤)
8. [CI/CDè¨­å®š](#cicdè¨­å®š)
9. [ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°](#ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## 1. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ¦‚è¦

### 1.1 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 æœ¬ç•ªç’°å¢ƒæ§‹æˆ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ãƒ¦ãƒ¼ã‚¶ãƒ¼    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ HTTPS
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   CDN / CloudFlare   â”‚ â† SSLè¨¼æ˜æ›¸ã€DDoSå¯¾ç­–
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰                       â”‚
    â”‚   (Vercel / Netlify / Nginx)         â”‚
    â”‚   â€¢ React SPA (é™çš„ãƒ•ã‚¡ã‚¤ãƒ«)          â”‚
    â”‚   â€¢ ãƒãƒ³ãƒ‰ãƒ«æ¸ˆã¿JS/CSS                â”‚
    â”‚   â€¢ ç”»åƒã‚¢ã‚»ãƒƒãƒˆ                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ APIå‘¼ã³å‡ºã—
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰        â”‚
    â”‚   food-del-server    â”‚ â† http://api.food-del.com
    â”‚   â€¢ Bun + Prisma     â”‚
    â”‚   â€¢ PostgreSQL       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³æ¯”è¼ƒ

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | ãƒ¡ãƒªãƒƒãƒˆ | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ | æ¨å¥¨ç”¨é€” |
|----------------|---------|-----------|---------|
| **Vercel** | âœ… è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤<br>âœ… é«˜é€ŸCDN<br>âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒè‡ªå‹•ç”Ÿæˆ | âŒ ç„¡æ–™æ åˆ¶é™ã‚ã‚Š | æ¨å¥¨ï¼ˆä¸­ã€œå¤§è¦æ¨¡ï¼‰ |
| **Netlify** | âœ… ç°¡å˜è¨­å®š<br>âœ… ç„¡æ–™æ ãŒåºƒã„<br>âœ… ãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ | âŒ ãƒ“ãƒ«ãƒ‰æ™‚é–“åˆ¶é™ | æ¨å¥¨ï¼ˆå°è¦æ¨¡ï¼‰ |
| **Nginx** | âœ… å®Œå…¨åˆ¶å¾¡<br>âœ… ã‚³ã‚¹ãƒˆå®‰<br>âœ… é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | âŒ ã‚µãƒ¼ãƒãƒ¼ç®¡ç†å¿…è¦ | è‡ªå‰ã‚µãƒ¼ãƒãƒ¼ |
| **Docker** | âœ… ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£<br>âœ… ç’°å¢ƒå†ç¾æ€§ | âŒ ã‚„ã‚„è¤‡é›‘ | ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º |

---

## 2. ç’°å¢ƒå¤‰æ•°è¨­å®š

### 2.1 ç’°å¢ƒå¤‰æ•°ä¸€è¦§

```bash
# .env.production
VITE_API_BASE_URL=https://api.food-del.com
VITE_APP_NAME=Food Del Dashboard
VITE_APP_VERSION=1.0.0
```

### 2.2 ç’°å¢ƒå¤‰æ•°ã®å„ªå…ˆé †ä½

```
1. .env.production.local  (ãƒ­ãƒ¼ã‚«ãƒ«æœ¬ç•ªç’°å¢ƒã€Gitignore)
2. .env.production        (æœ¬ç•ªç’°å¢ƒ)
3. .env.local             (ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã€Gitignore)
4. .env                   (å…¨ç’°å¢ƒå…±é€š)
```

### 2.3 ç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨æ–¹æ³•

```typescript
/**
 * src/lib/apiConstants.ts
 * 
 * ç’°å¢ƒå¤‰æ•°ã‹ã‚‰APIãƒ™ãƒ¼ã‚¹URLã‚’å–å¾—
 */

export const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:5000';
export const APP_NAME = import.meta.env.VITE_APP_NAME || 'Food Del Dashboard';
export const APP_VERSION = import.meta.env.VITE_APP_VERSION || 'dev';

console.log('[Environment]', {
  API_BASE_URL,
  APP_NAME,
  APP_VERSION,
  NODE_ENV: import.meta.env.MODE,
});
```

### 2.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …

```bash
# âŒ å±é™º: æ©Ÿå¯†æƒ…å ±ã‚’ç’°å¢ƒå¤‰æ•°ã«å«ã‚ãªã„
VITE_SECRET_KEY=abc123          # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«éœ²å‡º
VITE_DATABASE_URL=postgres://   # åŒä¸Š

# âœ… å®‰å…¨: å…¬é–‹æƒ…å ±ã®ã¿
VITE_API_BASE_URL=https://api.food-del.com
VITE_GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX

# æ©Ÿå¯†æƒ…å ±ã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ç®¡ç†
```

---

## 3. æœ¬ç•ªãƒ“ãƒ«ãƒ‰

### 3.1 ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰

```bash
# TypeScriptãƒã‚§ãƒƒã‚¯ + Viteãƒ“ãƒ«ãƒ‰
bun run build

# ã¾ãŸã¯ npm
npm run build

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’ç¢ºèª
ls -lh dist/
# â†’ dist/index.html
# â†’ dist/assets/index-[hash].js  (ç´„1MB)
# â†’ dist/assets/index-[hash].css (ç´„28KB)
```

### 3.2 ãƒ“ãƒ«ãƒ‰è¨­å®š

```typescript
/**
 * vite.config.ts
 * 
 * æœ¬ç•ªãƒ“ãƒ«ãƒ‰æœ€é©åŒ–è¨­å®š
 */

import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  
  build: {
    // å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
    outDir: 'dist',
    
    // ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—ç”Ÿæˆï¼ˆæœ¬ç•ªã§ã¯ç„¡åŠ¹åŒ–æ¨å¥¨ï¼‰
    sourcemap: false,
    
    // ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºè­¦å‘Šã—ãã„å€¤
    chunkSizeWarningLimit: 1000,
    
    // Rollupè¨­å®š
    rollupOptions: {
      output: {
        // ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²
        manualChunks: {
          // Reacté–¢é€£ã‚’åˆ†é›¢
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          
          // TanStack Queryã‚’åˆ†é›¢
          'query-vendor': ['@tanstack/react-query'],
          
          // Rechartsã‚’åˆ†é›¢ï¼ˆå¤§ãã„ãŸã‚ï¼‰
          'charts-vendor': ['recharts'],
        },
      },
    },
    
    // åœ§ç¸®
    minify: 'esbuild',
    
    // CSS Code Splitting
    cssCodeSplit: true,
  },
  
  // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒãƒ¼è¨­å®š
  preview: {
    port: 4173,
    host: true,
  },
});
```

### 3.3 ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–

```typescript
/**
 * ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯
 */

// âœ… æ¨å¥¨: å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆã‚³ãƒ¼ãƒ‰åˆ†å‰²ï¼‰
const DashboardPage = lazy(() => import('@/pages/dashboard'));
const OrderListPage = lazy(() => import('@/pages/orders'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Routes>
        <Route path="/" element={<DashboardPage />} />
        <Route path="/orders" element={<OrderListPage />} />
      </Routes>
    </Suspense>
  );
}

// âœ… æ¨å¥¨: Tree Shakingï¼ˆæœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ï¼‰
// lodashã®å…¨ä½“ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’é¿ã‘ã‚‹
import debounce from 'lodash/debounce';  // âœ… å€‹åˆ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
// import _ from 'lodash';  // âŒ å…¨ä½“ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆç´„70KBå¢—ï¼‰

// âœ… æ¨å¥¨: ç”»åƒæœ€é©åŒ–
// - WebPå½¢å¼ä½¿ç”¨
// - é©åˆ‡ãªã‚µã‚¤ã‚ºã«ãƒªã‚µã‚¤ã‚º
// - é…å»¶èª­ã¿è¾¼ã¿
<img src="/food.webp" loading="lazy" alt="Food" />
```

### 3.4 ãƒ“ãƒ«ãƒ‰çµæœã®ç¢ºèª

```bash
# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºåˆ†æ
bun run build --mode analyze

# ã¾ãŸã¯ vite-bundle-visualizer ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½¿ç”¨
bun add -D vite-bundle-visualizer

# vite.config.ts ã«è¿½åŠ 
import { visualizer } from 'vite-bundle-visualizer';

export default defineConfig({
  plugins: [
    react(),
    visualizer({ open: true }),  // ãƒ“ãƒ«ãƒ‰å¾Œã«ãƒ–ãƒ©ã‚¦ã‚¶ã§çµæœè¡¨ç¤º
  ],
});
```

---

## 4. Vercelãƒ‡ãƒ—ãƒ­ã‚¤

### 4.1 Vercel CLIã§ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. Vercel CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g vercel

# 2. ãƒ­ã‚°ã‚¤ãƒ³
vercel login

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
vercel

# 4. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
vercel --prod
```

### 4.2 Vercelè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```json
// vercel.json
{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/assets/(.*)",
      "headers": {
        "cache-control": "public, max-age=31536000, immutable"
      }
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "env": {
    "VITE_API_BASE_URL": "@api_base_url"
  }
}
```

### 4.3 GitHubã¨é€£æºï¼ˆè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰

```bash
# 1. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ—ãƒƒã‚·ãƒ¥
git add .
git commit -m "Initial commit"
git push origin main

# 2. Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (https://vercel.com/dashboard)
#    - "New Project" ã‚’ã‚¯ãƒªãƒƒã‚¯
#    - GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ
#    - Framework: Vite
#    - Build Command: bun run build
#    - Output Directory: dist
#    - Environment Variables: VITE_API_BASE_URL ã‚’è¨­å®š

# 3. ä»¥é™ã€mainãƒ–ãƒ©ãƒ³ãƒã¸ã®pushã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```

---

## 5. Netlifyãƒ‡ãƒ—ãƒ­ã‚¤

### 5.1 Netlify CLI

```bash
# 1. Netlify CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g netlify-cli

# 2. ãƒ­ã‚°ã‚¤ãƒ³
netlify login

# 3. åˆæœŸåŒ–
netlify init

# 4. ãƒ‡ãƒ—ãƒ­ã‚¤
netlify deploy --prod
```

### 5.2 netlify.tomlè¨­å®š

```toml
# netlify.toml
[build]
  command = "bun run build"
  publish = "dist"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[build.environment]
  VITE_API_BASE_URL = "https://api.food-del.com"

[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
```

---

## 6. Nginxãƒ‡ãƒ—ãƒ­ã‚¤

### 6.1 ã‚µãƒ¼ãƒãƒ¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Ubuntu/Debianç’°å¢ƒ

# 1. Nginxã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install nginx

# 2. Node.js/Bunã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ“ãƒ«ãƒ‰ç”¨ï¼‰
curl -fsSL https://bun.sh/install | bash

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
cd /var/www
sudo git clone <repository-url> food-del-dashboard
cd food-del-dashboard

# 4. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
bun install

# 5. æœ¬ç•ªãƒ“ãƒ«ãƒ‰
bun run build

# 6. ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’é…ç½®
sudo mkdir -p /var/www/food-del-dashboard-dist
sudo cp -r dist/* /var/www/food-del-dashboard-dist/
```

### 6.2 Nginxè¨­å®š

```nginx
# /etc/nginx/sites-available/food-del-dashboard
server {
    listen 80;
    listen [::]:80;
    server_name dashboard.food-del.com;

    # HTTPSã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆLet's Encryptè¨­å®šå¾Œï¼‰
    # return 301 https://$server_name$request_uri;

    root /var/www/food-del-dashboard-dist;
    index index.html;

    # Gzipåœ§ç¸®
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    # ã‚¢ã‚»ãƒƒãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
    location /assets/ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # SPAãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    location / {
        try_files $uri $uri/ /index.html;
        add_header Cache-Control "no-cache";
    }

    # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;

    # APIãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
    location /api/ {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# HTTPSè¨­å®šï¼ˆLet's Encryptï¼‰
# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name dashboard.food-del.com;
#
#     ssl_certificate /etc/letsencrypt/live/dashboard.food-del.com/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/dashboard.food-del.com/privkey.pem;
#     ssl_protocols TLSv1.2 TLSv1.3;
#     ssl_ciphers HIGH:!aNULL:!MD5;
#
#     # ä¸Šè¨˜ã¨åŒã˜è¨­å®š...
# }
```

### 6.3 Nginxæœ‰åŠ¹åŒ–

```bash
# ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ä½œæˆ
sudo ln -s /etc/nginx/sites-available/food-del-dashboard /etc/nginx/sites-enabled/

# è¨­å®šãƒ†ã‚¹ãƒˆ
sudo nginx -t

# Nginxå†èµ·å‹•
sudo systemctl restart nginx

# è‡ªå‹•èµ·å‹•è¨­å®š
sudo systemctl enable nginx

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
sudo systemctl status nginx
```

### 6.4 SSLè¨¼æ˜æ›¸ï¼ˆLet's Encryptï¼‰

```bash
# 1. Certbotã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install certbot python3-certbot-nginx

# 2. è¨¼æ˜æ›¸å–å¾—
sudo certbot --nginx -d dashboard.food-del.com

# 3. è‡ªå‹•æ›´æ–°è¨­å®šï¼ˆã‚¯ãƒ¼ãƒ­ãƒ³ã‚¸ãƒ§ãƒ–ï¼‰
sudo crontab -e
# ä»¥ä¸‹ã‚’è¿½åŠ 
0 3 * * * certbot renew --quiet
```

---

## 7. Dockerãƒ‡ãƒ—ãƒ­ã‚¤

### 7.1 Dockerfile

```dockerfile
# Dockerfile
# ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰

# ã‚¹ãƒ†ãƒ¼ã‚¸1: ãƒ“ãƒ«ãƒ‰ç’°å¢ƒ
FROM oven/bun:1.1.38-alpine AS builder

WORKDIR /app

# ä¾å­˜é–¢ä¿‚ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY package.json bun.lock ./
RUN bun install --frozen-lockfile

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ“ãƒ«ãƒ‰
COPY . .
RUN bun run build

# ã‚¹ãƒ†ãƒ¼ã‚¸2: æœ¬ç•ªç’°å¢ƒï¼ˆNginxï¼‰
FROM nginx:1.25-alpine

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’ã‚³ãƒ”ãƒ¼
COPY --from=builder /app/dist /usr/share/nginx/html

# Nginxè¨­å®šã‚’ã‚³ãƒ”ãƒ¼
COPY nginx.conf /etc/nginx/nginx.conf

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost/ || exit 1

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

### 7.2 nginx.confï¼ˆDockerç”¨ï¼‰

```nginx
# nginx.conf
events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    server {
        listen 80;
        server_name _;

        root /usr/share/nginx/html;
        index index.html;

        gzip on;
        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

        location / {
            try_files $uri $uri/ /index.html;
        }

        location /assets/ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }
}
```

### 7.3 Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  dashboard:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:80"
    environment:
      - VITE_API_BASE_URL=http://api:5000
    depends_on:
      - api
    restart: unless-stopped

  api:
    image: food-del-server:latest
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=postgresql://user:password@db:5432/fooddel
    depends_on:
      - db
    restart: unless-stopped

  db:
    image: postgres:16-alpine
    environment:
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=fooddel
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  postgres_data:
```

### 7.4 Dockerå®Ÿè¡Œ

```bash
# ãƒ“ãƒ«ãƒ‰
docker build -t food-del-dashboard:latest .

# å®Ÿè¡Œ
docker run -d -p 3000:80 --name dashboard food-del-dashboard:latest

# Docker Composeå®Ÿè¡Œ
docker-compose up -d

# ãƒ­ã‚°ç¢ºèª
docker logs -f dashboard

# åœæ­¢
docker-compose down
```

---

## 8. CI/CDè¨­å®š

### 8.1 GitHub Actions

```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: 1.1.38

      - name: Install dependencies
        run: bun install --frozen-lockfile

      - name: TypeScript check
        run: bun run build

      - name: Build production
        run: bun run build
        env:
          VITE_API_BASE_URL: ${{ secrets.VITE_API_BASE_URL }}

      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'
```

### 8.2 GitLab CI

```yaml
# .gitlab-ci.yml
stages:
  - build
  - deploy

build:
  stage: build
  image: oven/bun:1.1.38
  script:
    - bun install --frozen-lockfile
    - bun run build
  artifacts:
    paths:
      - dist/
    expire_in: 1 hour

deploy:
  stage: deploy
  image: alpine
  script:
    - apk add --no-cache rsync openssh
    - rsync -avz --delete dist/ user@server:/var/www/dashboard/
  only:
    - main
```

---

## 9. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°

### 9.1 ã‚¨ãƒ©ãƒ¼è¿½è·¡ï¼ˆSentryçµ±åˆï¼‰

```bash
# Sentryã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
bun add @sentry/react
```

```typescript
// src/lib/sentry.ts
import * as Sentry from '@sentry/react';

if (import.meta.env.PROD) {
  Sentry.init({
    dsn: 'https://your-sentry-dsn@sentry.io/project-id',
    environment: import.meta.env.MODE,
    tracesSampleRate: 0.1,
    beforeSend(event) {
      // æ©Ÿå¯†æƒ…å ±ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
      if (event.request?.headers?.Authorization) {
        event.request.headers.Authorization = '[Filtered]';
      }
      return event;
    },
  });
}

// main.tsx
import './lib/sentry';
```

### 9.2 Google Analytics

```typescript
// src/lib/analytics.ts
export function initAnalytics() {
  if (import.meta.env.PROD) {
    const script = document.createElement('script');
    script.async = true;
    script.src = `https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX`;
    document.head.appendChild(script);

    window.dataLayer = window.dataLayer || [];
    function gtag() {
      window.dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  }
}

// ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼è¿½è·¡
export function trackPageView(path: string) {
  if (window.gtag) {
    window.gtag('config', 'G-XXXXXXXXXX', {
      page_path: path,
    });
  }
}
```

---

## 10. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 10.1 ã‚ˆãã‚ã‚‹å•é¡Œ

#### å•é¡Œ1: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
```bash
# ã‚¨ãƒ©ãƒ¼: "Cannot find module '@/components/...'"
# åŸå› : ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„

# è§£æ±ºç­–: tsconfig.json ã¨ vite.config.ts ã‚’ç¢ºèª
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

#### å•é¡Œ2: æœ¬ç•ªç’°å¢ƒã§APIãŒå‘¼ã¹ãªã„
```bash
# ã‚¨ãƒ©ãƒ¼: "Failed to fetch"
# åŸå› : CORSè¨­å®šã¾ãŸã¯APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸ä¸€è‡´

# è§£æ±ºç­–1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§CORSè¨±å¯
app.use(cors({
  origin: 'https://dashboard.food-del.com',
  credentials: true
}));

# è§£æ±ºç­–2: ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
console.log('API URL:', import.meta.env.VITE_API_BASE_URL);
```

#### å•é¡Œ3: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒ404ã«ãªã‚‹
```bash
# åŸå› : SPAãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šä¸è¶³

# è§£æ±ºç­–: Nginxè¨­å®š
location / {
    try_files $uri $uri/ /index.html;
}

# Vercel: vercel.json
{
  "routes": [
    { "src": "/(.*)", "dest": "/index.html" }
  ]
}
```

### 10.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

```bash
# Lighthouseã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
npx lighthouse https://dashboard.food-del.com --view

# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç¢ºèª
bun run build
ls -lh dist/assets/

# ç”»åƒæœ€é©åŒ–
# - WebPå½¢å¼ã«å¤‰æ›
# - é©åˆ‡ãªã‚µã‚¤ã‚ºã«ãƒªã‚µã‚¤ã‚º
# - é…å»¶èª­ã¿è¾¼ã¿å®Ÿè£…
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Viteå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vitejs.dev/)
- [Vercelå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vercel.com/docs)
- [Netlifyå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.netlify.com/)
- [Nginxå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nginx.org/en/docs/)
- [Dockerå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.docker.com/)

---

**æœ€çµ‚æ›´æ–°**: 2025-10-15  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… æœ¬ç•ªæº–å‚™å®Œäº†
